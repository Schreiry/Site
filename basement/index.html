<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="eng">
<head>
    <meta charset="UTF-8">
    <title>Site</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        #results { margin-top: 20px; }
        .result { border-bottom: 1px solid #ccc; padding: 10px 0; }
    </style>
    <link rel="stylesheet"  href="style.css" /><link rel="stylesheet"  href="style.css" />
</head>
<body>
    <h1>Library Search</h1>
    <input type="text" id="searchBox" placeholder="Enter a query to search for..." autocomplete="off" style="width: 400px; padding: 8px;">
    <div id="results"></div>
    <div class="mom">
        <div class="anim">
            <span style="--i:11"></span>
            <span style="--i:41"></span>
            <span style="--i:31"></span>
            <span style="--i:14"></span>
            <span style="--i:30"></span>
            <span style="--i:31"></span>
            <span style="--i:42"></span>
            <span style="--i:26"></span>
            <span style="--i:41"></span>
            <span style="--i:17"></span>
            <span style="--i:10"></span>
            <span style="--i:20"></span>
            <span style="--i:10"></span>
            <span style="--i:50"></span>
            <span style="--i:36"></span>
            <span style="--i:14"></span>
            <span style="--i:15"></span>
            <span style="--i:31"></span>
            <span style="--i:42"></span>
            <span style="--i:26"></span>
            <span style="--i:41"></span>
            <span style="--i:17"></span>
            <span style="--i:10"></span>
            <span style="--i:20"></span>
            <span style="--i:18"></span>
            <span style="--i:27"></span>
            <span style="--i:37"></span>
            <span style="--i:11"></span>
            <span style="--i:12"></span>
            <span style="--i:37"></span>
            <span style="--i:17"></span>
            <span style="--i:51"></span>
            <span style="--i:31"></span>
            <span style="--i:42"></span>
            <span style="--i:26"></span>
            <span style="--i:41"></span>
            <span style="--i:17"></span>
            <span style="--i:10"></span>
            <span style="--i:20"></span>
            <span style="--i:18"></span>
            <span style="--i:27"></span>
            <span style="--i:37"></span>
            <span style="--i:14"></span>
            <span style="--i:15"></span>
            <span style="--i:31"></span>
            <span style="--i:42"></span>
            <span style="--i:26"></span>
            <span style="--i:41"></span>
            <span style="--i:17"></span>
            <span style="--i:10"></span>
            <span style="--i:20"></span>
            <span style="--i:18"></span>
            <span style="--i:20"></span>
            <span style="--i:10"></span>
            <span style="--i:50"></span>
            <span style="--i:36"></span>
            <span style="--i:14"></span>
            <span style="--i:15"></span>
            <span style="--i:31"></span>
            <span style="--i:42"></span>
            <span style="--i:26"></span>
            <span style="--i:41"></span>
        </div>
        <div class="text">
            <h1>WELCOME!</h1>
        </div>
    </div>
  
    <script>
        const searchBox = document.getElementById('searchBox');
        const resultsDiv = document.getElementById('results');

        searchBox.addEventListener('input', function() {
            const query = searchBox.value;
            if(query.length < 1) {
                resultsDiv.innerHTML = '';
                return;
            }
            fetch(`/search?q=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(data => {
                    resultsDiv.innerHTML = '';
                    data.forEach(item => {
                        let html = "";
                        if(item.type === "book") {
                            html = `<strong>Book:</strong> ${item.data.title} — ${item.data.author} <br>
                                    <em>genre :</em> ${item.data.genre} | Style: ${item.data.style} | Epoch: ${item.data.century} <br>
                                    <em>Keywords::</em> ${item.data.keywords.join(', ')}`;
                        } else if(item.type === "character") {
                            html = `<strong>Персонаж:</strong> ${item.data.name} <br>
                                    <em>Описание:</em> ${item.data.description}`;
                        } else if(item.type === "historical_event") {
                            html = `<strong>Historic Event:</strong> ${item.data.name} (${item.data.date})<br>
                                    <em>Description : </em> ${item.data.description}`;
                        }
                        const div = document.createElement('div');
                        div.className = 'result';
                        div.innerHTML = html;
                        resultsDiv.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
